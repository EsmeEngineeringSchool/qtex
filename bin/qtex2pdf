#!/bin/bash
qtex=$1
[ -z "$qtex" ] && echo "Usage: $0 <input_qtex_file>" && exit 1
QTEX_SRC="/home/filipe/dev/qtex/src"
QTEX_TESTS="/home/filipe/dev/qtex/tests"
build="$QTEX_TESTS/build"
mkdir -p "$build"
template="$QTEX_SRC/qtex/qtex2latex/templates/template_qcm_simple.tex"
[ ! -f "$template" ] && echo "Template not found" && exit 1
cat ${template} > ${build}/tmp_simple.tex
qtex2latex -i ${qtex} >> $build/tmp_simple.tex
echo "\end{document}" >> $build/tmp_simple.tex
pdflatex -output-directory $build $build/tmp_simple.tex > "$build/pdflatex.log" 2>&1 
mupdf -r 216 $build/tmp_simple.pdf #2> /dev/null &
